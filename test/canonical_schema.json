{
  "openapi": "3.0.0",
  "info": {
    "title": "Collaborative Notes & Tasks API",
    "version": "1.0.0",
    "description": "AUT for API Testing Platform"
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Local server"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "number",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email"
          },
          "isActive": {
            "type": "boolean",
            "description": "User active status"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "User creation timestamp"
          }
        },
        "example": {
          "_id": 1,
          "email": "user@example.com",
          "isActive": true,
          "createdAt": "2021-06-21T10:00:00.000Z"
        }
      },
      "Notebook": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "number",
            "description": "Notebook ID"
          },
          "name": {
            "type": "string",
            "description": "Name of the notebook"
          },
          "owner": {
            "type": "number",
            "description": "ID of the user who owns the notebook"
          },
          "isArchived": {
            "type": "boolean",
            "description": "Whether the notebook is archived"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Notebook creation timestamp"
          }
        },
        "example": {
          "_id": 101,
          "name": "My First Notebook",
          "owner": 1,
          "isArchived": false,
          "createdAt": "2021-06-21T10:05:00.000Z"
        }
      },
      "Blog": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "number",
            "description": "Blog ID"
          },
          "title": {
            "type": "string",
            "description": "Title of the blog"
          },
          "content": {
            "type": "string",
            "description": "Content of the blog"
          },
          "notebookId": {
            "type": "number",
            "description": "ID of the notebook this blog belongs to"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Blog creation timestamp"
          }
        },
        "example": {
          "_id": 201,
          "title": "Meeting Agenda",
          "content": "Discuss project milestones and deadlines.",
          "notebookId": 101,
          "createdAt": "2021-06-21T10:10:00.000Z"
        }
      },
      "Task": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "number",
            "description": "Task ID"
          },
          "description": {
            "type": "string",
            "description": "Description of the task"
          },
          "status": {
            "type": "string",
            "enum": [
              "OPEN",
              "DONE"
            ],
            "description": "Current status of the task"
          },
          "notebookId": {
            "type": "number",
            "description": "ID of the notebook this task belongs to"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Task creation timestamp"
          }
        },
        "example": {
          "_id": 301,
          "description": "Finish project report",
          "status": "OPEN",
          "notebookId": 101,
          "createdAt": "2021-06-21T10:15:00.000Z"
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "string"
          }
        }
      }
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/api/auth/register": {
      "post": {
        "summary": "Register a new user",
        "tags": [
          "Auth"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully"
          },
          "400": {
            "description": "Bad request"
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "summary": "Login user",
        "tags": [
          "Auth"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful"
          },
          "401": {
            "description": "Invalid credentials"
          }
        }
      }
    },
    "/api/auth/me": {
      "get": {
        "summary": "Get current logged in user",
        "tags": [
          "Auth"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "User details"
          },
          "401": {
            "description": "Not authorized"
          }
        }
      }
    },
    "/api/notebooks/{notebookId}/blogs": {
      "get": {
        "summary": "Get all blogs for a specific notebook",
        "tags": [
          "Blogs"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "notebookId",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook"
          }
        ],
        "responses": {
          "200": {
            "description": "A list of blogs",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "count": {
                      "type": "integer"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Blog"
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Notebook not found"
          }
        }
      },
      "post": {
        "summary": "Create a new blog in a specific notebook",
        "tags": [
          "Blogs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "notebookId",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "title",
                  "content"
                ],
                "properties": {
                  "title": {
                    "type": "string"
                  },
                  "content": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Blog created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Blog"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Not authorized (if ownership check fails)"
          },
          "404": {
            "description": "Notebook not found"
          }
        }
      }
    },
    "/api/notebooks/{notebookId}/blogs/{id}": {
      "get": {
        "summary": "Get single blog by ID for a specific notebook",
        "tags": [
          "Blogs"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "notebookId",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook"
          },
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the blog to retrieve"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response with the blog data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Blog"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Notebook or Blog not found"
          }
        }
      },
      "put": {
        "summary": "Update a blog by ID for a specific notebook",
        "tags": [
          "Blogs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "notebookId",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook"
          },
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the blog to update"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string"
                  },
                  "content": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Blog updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Blog"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Not authorized (if ownership check fails)"
          },
          "404": {
            "description": "Notebook or Blog not found"
          }
        }
      },
      "delete": {
        "summary": "Delete a blog by ID for a specific notebook",
        "tags": [
          "Blogs"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "notebookId",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook"
          },
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the blog to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Blog deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not authorized (if ownership check fails)"
          },
          "404": {
            "description": "Notebook or Blog not found"
          }
        }
      }
    },
    "/api/notebooks": {
      "get": {
        "summary": "Get all notebooks",
        "tags": [
          "Notebooks"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "A list of notebooks",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "count": {
                      "type": "integer"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Notebook"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not authorized"
          }
        }
      },
      "post": {
        "summary": "Create new notebook",
        "tags": [
          "Notebooks"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "isArchived": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Notebook created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Notebook"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Not authorized"
          }
        }
      }
    },
    "/api/notebooks/{id}": {
      "get": {
        "summary": "Get single notebook by ID",
        "tags": [
          "Notebooks"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook to retrieve"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response with the notebook data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Notebook"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not authorized"
          },
          "404": {
            "description": "Notebook not found"
          }
        }
      },
      "put": {
        "summary": "Update a notebook by ID",
        "tags": [
          "Notebooks"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook to update"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "isArchived": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Notebook updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Notebook"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Not authorized"
          },
          "404": {
            "description": "Notebook not found"
          }
        }
      },
      "delete": {
        "summary": "Delete a notebook by ID",
        "tags": [
          "Notebooks"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Notebook deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not authorized"
          },
          "403": {
            "description": "Not authorized to delete this notebook (e.g., if it has open tasks)"
          },
          "404": {
            "description": "Notebook not found"
          }
        }
      }
    },
    "/api/notebooks/{notebookId}/tasks": {
      "get": {
        "summary": "Get all tasks for a specific notebook",
        "tags": [
          "Tasks"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "notebookId",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook"
          }
        ],
        "responses": {
          "200": {
            "description": "A list of tasks",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "count": {
                      "type": "integer"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Task"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not authorized"
          },
          "404": {
            "description": "Notebook not found"
          }
        }
      },
      "post": {
        "summary": "Create a new task in a specific notebook",
        "tags": [
          "Tasks"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "notebookId",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "description"
                ],
                "properties": {
                  "description": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "OPEN",
                      "DONE"
                    ],
                    "default": "OPEN"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Task created",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Task"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Not authorized"
          },
          "404": {
            "description": "Notebook not found"
          }
        }
      }
    },
    "/api/notebooks/{notebookId}/tasks/{id}": {
      "get": {
        "summary": "Get single task by ID for a specific notebook",
        "tags": [
          "Tasks"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "notebookId",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook"
          },
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the task to retrieve"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response with the task data",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Task"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not authorized"
          },
          "404": {
            "description": "Notebook or Task not found"
          }
        }
      },
      "put": {
        "summary": "Update a task by ID for a specific notebook",
        "tags": [
          "Tasks"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "notebookId",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook"
          },
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the task to update"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "description": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "OPEN",
                      "DONE"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Task updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Task"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Not authorized"
          },
          "404": {
            "description": "Notebook or Task not found"
          }
        }
      },
      "delete": {
        "summary": "Delete a task by ID for a specific notebook",
        "tags": [
          "Tasks"
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "notebookId",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the notebook"
          },
          {
            "in": "path",
            "name": "id",
            "schema": {
              "type": "number"
            },
            "required": true,
            "description": "ID of the task to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Task deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Not authorized"
          },
          "403": {
            "description": "Not authorized to delete this task (e.g., if note does not exist)"
          },
          "404": {
            "description": "Notebook or Task not found"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Blogs",
      "description": "Blog management"
    },
    {
      "name": "Notebooks",
      "description": "Notebook management"
    },
    {
      "name": "Tasks",
      "description": "Task management"
    }
  ]
}